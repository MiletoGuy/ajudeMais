<html>
<head>
  <meta charset="UTF-8">
  <title>Ajude Mais - Recolhimento</title>
  <link rel="stylesheet" type="text/css" href="css/recolhimento.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"></script>
</head>
<body>
  <header class="container-menu">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <nav class="navbar navbar-expand-lg navbar-light m-2">
            <a class="navbar-brand" href="home.html">
              <img src="Imagens/logo.png" alt="" class="img-logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse"
              data-target="#bs-example-navbar-collapse-1">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="caxa-perfil">


            </div>
            <div class="collapse navbar-collapse justify-content-end" id="bs-example-navbar-collapse-1">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a href="home.html" class="nav-link">
                    <label class="label-menu">HOME</label>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="sobrenos.html" class="nav-link">
                    <label class="label-menu">SOBRE NÓS</label>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="explorar.html" class="nav-link">
                    <label class="label-menu">EXPLORAR</label>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="recolhimento.html" class="nav-link">
                    <label class="label-menu">RECOLHIMENTO</label>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="login.html" class="nav-link">
                    <label class="label-menu">LOGIN</label>
                  </a>
                </li>
                <li>
                  <button class="btn btn-primary my-2 my-sm-0" type="submit"
                    style="background-color: #de125b; border: 0;"><strong>DOAR</strong></button>
                </li>
              </ul>
            </div><br clear="all">
          </nav>
        </div>
      </div>
    </div>
  </header>
  <div id="breadcrumb">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-10 col-sm-9 col-12">
                <h2 class="m-0">Recolhimento</h2>
            </div>
            <div class="col-md-2 col-sm-3 d-none d-sm-block justify-content-end">
                <button type="button" style="background-color: #535353; border-color: #535353;" onclick="" class="btn btn-primary btn-back" data-toggle="button" aria-pressed="false">
                    <img class="icon-aprev" src="https://fenixesquadrias.com.br/img/icons/arrow-prev.svg">
                    <strong>voltar</strong>
                </button>
            </div>
        </div>
    </div>
  </div>
  <div class="formulario">
        <div class="container-fluid">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h1 class="cad-count" id="ExemHeader">LOCAL DE RECOLHIMENTO</h1>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 cad-login">
                        Encontre um local de recolhimento mais perto de voce!
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
  <div class="row">
    <div class="col-md-6">
      <div id="regions_div" style="width: 1000px; height: 600px;"></div>
    </div>
    <div class="col-md-6 feature">
        <select id="seletorCombo" style="width: 50%;">
          <option>Selecione um Estado</option>
          <option value="1">Acre</option>
          <option value="2">Alagoas</option>
          <option value="3">Amapa</option>
          <option value="4">Amazonas</option>
          <option value="5">Bahia</option>
          <option value="6">Ceara</option>
          <option value="7">Distrito Federal</option>
          <option value="8">Espirito Santo</option>
          <option value="9">Goias</option>
          <option value="10">Maranhão</option>
          <option value="11">Mato Grosso</option>
          <option value="12">Mato Grosso do Sul</option>
          <option value="13">Minas Gerais</option>
          <option value="14">Para</option>
          <option value="15">Paraíba</option>
          <option value="16">Parana</option>
          <option value="17">Pernambuco</option>
          <option value="18">Piaui</option>
          <option value="19">Rio de Janeiro</option>
          <option value="20">Rio Grande do Norte</option>
          <option value="21">Rio Grande do Sul</option>
          <option value="22">Rondonia</option>
          <option value="23">Roraima</option>
          <option value="24">Santa Catarina</option>
          <option value="25">Sao Paulo</option>
          <option value="26">Sergipe</option>
          <option value="27">Tocantins</option>
        </select>
        <h4>Unidades em <span id="estado"></span>:<h4>
            <div id="dadosLojas" style="overflow-y: scroll; height:200px;">

            </div>
    </div>
  </div>
  <footer class="rodape">
    <div class="container pt-4 pb-1">
      <div class="row">
        <div class="col-md-4">
          <div class="fc2">
            <h3 class="rodape-title">Acesso Rápido</h3>
            <span><a href="home.html" class="" style="color: #fff">Home</a></span><br>
            <span><a href="explorar.html" class="" style="color: #fff">Explorar</a></span><br>
            <span><a href="sobrenos.html" class="" style="color: #fff">Sobre Nós</a></span><br>
            <span><a href="login.html" class="" style="color: #fff">Login</a></span><br>
            <span><a href="cadastro.html" class="" style="color: #fff">Registrar</a></span><br>
            <span><a href="recolhimento.html" class="" style="color: #fff">Pontos de Recolhimento</a></span>
          </div>
        </div>
        <div class="col-md-4">
          <div class="fc3">
            <h3 class="rodape-title">Fale Conosco</h3>
            <div class="dados">
              <p>Telefone: (45) 99116-6770<br>
                WhatsApp: (45) 99116-6770<br>
                <br>Rua Fagundes Varela, 2590. Cascavel-PR
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="fc5">
            <h3 class="rodape-title">Formas de Pagamento</h3>
            <a class="cartoes">
              <img src="Imagens/cartoes.png" class="img-cartoes">
            </a>
          </div>
          <div class="fc6c">
            <h3 class="rodape-title">NewsLatter</h3>
            <div class="dados">
              <p>Receba as novidades diretamente no seu e-mail</p>
            </div>
            <div class="form-inline">
              <input type="email" id="newslatter" value="" class="form-control" placeholder="Digite seu E-mail">
              <button type="submit" style="background-color: #fff; border-color: #fff;" onclick=""
                class="btn btn-light">Enviar</button>
            </div>
          </div>
        </div>
        <div id="linha2"></div>
        <div class="bar-left col-md-6 d-flex justify-content-start">
          <img src="Imagens/logo.png" alt="" class="img-logo">
        </div>
        <div class="bar-right col-md-6 d-flex justify-content-end">
          <span class="dir-reserv">Todos os direitos reservados. 2021</span>
        </div>
      </div>
    </div>
  </footer>
</body>
</html>

<script type="text/javascript" src="js/loader.js"></script>
<script type="text/javascript" src="js/jsapi.js"></script>
<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>

<script type="text/javascript">
  google.charts.load('current', { 'packages': ['geochart'] });
  google.charts.setOnLoadCallback(drawRegionsMap);

  dicEstados = {
    '1': 'Acre',
    '2': 'Alagoas',
    '3': 'Amapa',
    '4': 'Amazonas',
    '5': 'Bahia',
    '6': 'Ceara',
    '7': 'Distrito Federal',
    '8': 'Espirito Santo',
    '9': 'Goias',
    '10': 'Maranhao',
    '11': 'Mato Grosso',
    '12': 'Mato Grosso do Sul',
    '13': 'Minas Gerais',
    '14': 'Para',
    '15': 'Paraiba',
    '16': 'Parana',
    '17': 'Pernambuco',
    '18': 'Piaui',
    '19': 'Rio de Janeiro',
    '20': 'Rio Grande do Norte',
    '21': 'Rio Grande do Sul',
    '22': 'Rondonia',
    '23': 'Roraima',
    '24': 'Santa Catarina',
    '25': 'Sao Paulo',
    '26': 'Sergipe',
    '27': 'Tocantins'
  }
  //o array abaixo pode ser alimentado por uma base de dados, ou api rest. no exemplo, deixei fixo.
  unidades = {
    'Acre':
    {
      '0':
      {
        'Loja': 'IT-Milano',
        'Fone': '',
        'Endereco': ''
      }, '1':
      {
        'Loja': '*PT-Lisboa Centro',
        'Fone': '0000-0000',
        'Endereco': 'Praça Doutor Teixeira Aragão 4 2D'
      }
    },
    'Maranhao':
    {
      '0':
      {
        'Loja': 'Sao Luis Centro',
        'Fone': '',
        'Endereco': ''
      }, '1':
      {
        'Loja': 'Renascenca',
        'Fone': '0000-0000',
        'Endereco': 'Renascenca 2 Rua 7'
      }, '2':
      {
        'Loja': 'Caolho',
        'Fone': '0000-1234',
        'Endereco': 'Av. Avivares 2 Rua 7'
      }
    },
    'Sao Paulo':
    {
      '0':
      {
        'Loja': 'Araçatuba',
        'Fone': '18 3117 7471',
        'Endereco': 'Acesse o site'
      }, '1':
      {
        'Loja': 'Bauru',
        'Fone': '(14) 3014-9181',
        'Endereco': ''
      }
    },
    'Bahia':
    {
      '0':
      {
        'Loja': 'Feira de Santana',
        'Fone': '71 3488-6577',
        'Endereco': 'Rua Senador Theotonio Vilela, 110'
      }, '1':
      {
        'Loja': 'Ilheus',
        'Fone': '0000-0000',
        'Endereco': 'Rua Duque de Caxias, 465, sala 01, 02 e 03'
      }
    }
  }

  var ultimoEstadoSelecionado = '';


  function drawRegionsMap() {

    var data = google.visualization.arrayToDataTable([
      ['Country'],
      ['Brazil'],
      ['Acre'],
      ['Alagoas'],
      ['Amapa'],
      ['Amazonas'],
      ['Bahia'],
      ['Ceara'],
      ['Distrito Federal'],
      ['Espirito Santo'],
      ['Goias'],
      ['Maranhao'],
      ['Mato Grosso'],
      ['Mato Grosso do Sul'],
      ['Minas Gerais'],
      ['Para'],
      ['Paraiba'],
      ['Parana'],
      ['Pernambuco'],
      ['Piaui'],
      ['Rio de Janeiro'],
      ['Rio Grande do Norte'],
      ['Rio Grande do Sul'],
      ['Rondonia'],
      ['Roraima'],
      ['Santa Catarina'],
      ['Sao Paulo'],
      ['Sergipe'],
      ['Tocantins']
    ]);

    var options = {
      region: 'BR',
      resolution: 'provinces',
      datalessRegionColor: 'white',
      defaultColor: '#F1F2F3',
      enableRegionInteractivity: true
    };

    var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

    function myClickHandler() {
      var selection = chart.getSelection();
      var message = '';
      for (var i = 0; i < selection.length; i++) {
        var item = selection[i];
        if (item.row != null && item.column != null) {
          message += '{' + item.row + ',column:' + item.column + '}';
        } else if (item.row != null) {
          message += '' + item.row + '';
        } else if (item.column != null) {
          message += '{column:' + item.column + '}';
        }
      }
      if (message == '') {
        message = ultimoEstadoSelecionado;
      } else {
        ultimoEstadoSelecionado = message;
      }
      document.getElementById("dadosLojas").innerHTML = '';
      for (var i = 0; i < Object.keys(unidades).length; i++) {
        document.getElementById("estado").innerHTML = dicEstados[message];
        //Ponto de melhoria, percorrer o array apenas nos itens relacionados ao estado clicado/marcado. (lazy)
        if (unidades[dicEstados[message]][i] != undefined) {
          document.getElementById("dadosLojas").innerHTML +=
            '<br>Unidade: ' +
            unidades[dicEstados[message]][i]['Loja'] +
            '<br>Fone: ' +
            unidades[dicEstados[message]][i]['Fone'] +
            '<br>Endereco: '
            + unidades[dicEstados[message]][i]['Endereco'] + '<br>';
        }
      }
    }

    google.visualization.events.addListener(chart, 'select', myClickHandler);

    chart.draw(data, options);

    $('#seletorCombo').change(function () {
      valEstado = $(this).val();
      arraySelection = [];
      arraySelection.push({ column: null, row: Number(valEstado) });


      function myComboHandler(option) {
        var selection = option;
        console.log(selection);
        var message = '';
        for (var i = 0; i < selection.length; i++) {
          var item = selection[i];
          if (item.row != null && item.column != null) {
            message += '{' + item.row + ',column:' + item.column + '}';
          } else if (item.row != null) {
            message += '' + item.row + '';
          } else if (item.column != null) {
            message += '{column:' + item.column + '}';
          }
        }
        if (message == '') {
          message = 'nothing';
          return false;
        }
        document.getElementById("dadosLojas").innerHTML = '';
        for (var i = 0; i < Object.keys(unidades).length; i++) {
          document.getElementById("estado").innerHTML = dicEstados[message];
          document.getElementById("dadosLojas").innerHTML +=
            '<br>Unidade: ' +
            unidades[dicEstados[message]][i]['Loja'] +
            '<br>Fone: ' +
            unidades[dicEstados[message]][i]['Fone'] +
            '<br>Endereco: '
            + unidades[dicEstados[message]][i]['Endereco'] + '<br>';
        }
      }


      google.visualization.events.addListener(chart, 'select', myComboHandler);

      chart.draw(data, options);

      myComboHandler(arraySelection);
    });
  }



</script>
